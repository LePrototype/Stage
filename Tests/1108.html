<!doctype html>
<html class="no-js" lang="" xmlns="http://www.w3.org/1999/html">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Test</title>
    </head>
    <body>
        <div id="gutscheinconnection-container"></div>
        <script type="text/javascript">

            var TrackingType = "TrackingType";
            var Organization = "Organization";
            var Event = "Event";
            var OrderID = [342, 323, 65];
            var OrderTotal = 23435;
            var Currency = "Currency";
            var ProductIDList = [4, 6, 23];
            var ProductNameList = ["Product", "Name", "List"];
            var ProductUnitPriceList = [123, 3, 234];
            var ProductQuantityList = [1, 2, 3];
            var TDUIDCookieName = "TDUIDCookieName";


            function readCookie(name) {
              var nameEQ = name + "=";
              var ca = document.cookie.split(';');
              for (var i = 0; i < ca.length; i++) {
                var c = ca[i];
                while (c.charAt(0) == ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
              }
              return null;
            }

            var src = ["https://tb" + TrackingType +
              ".tradedoubler.com/report?"
            ];
            src.push("organization=" + Organization);
            src.push("&event=" + Event);

            src.push("&orderNumber=" + OrderID);
            src.push("&orderValue=" + OrderTotal);
            src.push("&currency=" + Currency);

            var reportQuery = [];
            for (var i = 0; i < ProductIDList.length; i++) {
              if (i > 0) {
                reportQuery.push("|");
              }
              reportQuery.push("f1=" + ProductIDList[i]);
              reportQuery.push("&f2=" + ProductNameList[i]);
              reportQuery.push("&f3=" + ProductUnitPriceList[i]);
              reportQuery.push("&f4=" + ProductQuantityList[i]);
            }

            src.push("&reportInfo=" + escape(reportQuery.join("")));

            var tduidCookie = readCookie("" + TDUIDCookieName +
              "");
            tduidCookie = tduidCookie ? tduidCookie : "";
            src.push("&tduid=" + tduidCookie);

            var img = document.createElement("img");
            img.setAttribute("src", src.join(""));
            document.body.appendChild(img);
        </script>
    </body>
</html>
