<!doctype html>
<html class="no-js" lang="" xmlns="http://www.w3.org/1999/html">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Test</title>
    </head>
    <body>
        <script type="text/javascript">

            var ProductSKUList = [4, 6, 23];
            var ProductQuantityList = [1, 2, 3];
            var ProductPriceList = [123, 3, 234];
            var OrderID = [342, 323, 65];
            var OrderTotal = 23435;

            var SteelHouseAdvertiserID = 123;
            var OrderCurrency = "OrderCurrency";
            var AdditionalInformation = "AdditionalInformation";



            var _this = this;

            function shaddslashes(e) {
              "use strict";
              if (e != undefined) {
                e = e.replace(/%/g, "%25%32%35");
                e = e.replace(/\\/g, "%5C");
                e = e.replace(/\'/g, "%27");
                e = e.replace(/\"/g, "%22");
                e = e.replace(/\?/g, "%25%33%46");
                e = e.replace(/&/g, "%25%32%36");
                e = e.replace(/\+/g, "%25%32%42")
              }
              return e
            }
            //Make CSVs out of UV pseudo-arrays.
            //Will work if the customer provides actual arrays, too (though join would be cleaner).
            function getSKUs() {
              var temp_skus = "";
              for (var sku_index = 0; sku_index < ProductSKUList.length; sku_index++) {
                temp_skus += ProductSKUList[sku_index];
                if (sku_index != ProductSKUList.length - 1) temp_skus += ",";
              }
              return sku_index;
            }

            function getQtys() {
              var temp_quants = "";
              for (var quant_index = 0; quant_index < ProductQuantityList.length; quant_index++) {
                temp_quants += ProductQuantityList[quant_index];
                if (quant_index != ProductQuantityList.length - 1)
                  temp_quants +=
                    ",";
              }
              return temp_quants;
            }

            function getCount() {
              var temp = 0;
              for (var index = 0; index < ProductQuantityList.length; index++) {
                temp += Number(ProductQuantityList[index]);
              }
              return temp;
            }

            function getPrices() {
              var temp_prices = "";
              for (var price_index = 0; price_index < ProductPriceList.length; price_index++) {
                temp_prices += ProductPriceList[price_index];
                if (price_index != ProductPriceList.length - 1) temp_prices +=
                  ",";
              }
              return temp_prices;
            }

            (function() {
              "use strict";
              var e = null,

                //this next line would make a CSV from an array for f later on
                //stock_counts = ${stock_counts}.join(","),
                t = "3.4.0",
                n = "" + SteelHouseAdvertiserID,
                r = "" + OrderID,
                i = "" + OrderTotal,
                s = "" + OrderCurrency,
                o = getSKUs(),
                u = getQtys(),
                a = getPrices(),
                //f here could be a stock count CSV if a client ever wants it
                f = "",
                shadditional = "" + AdditionalInformation,
                l, c, h;
              try {
                l = top.document.referer !== "" ? encodeURIComponent(top.document.referrer
                  .substring(0, 256)) : "";
              } catch (d) {
                l = document.referrer !== null ? encodeURIComponent(document.referrer.toString()
                  .substring(0, 256)) : "";
              }
              try {
                c = window && window.top && document.location && window.top.location ===
                  document.location ? document.location : window && window.top && window.top
                  .location && "" !== window.top.location ? window.top.location : document
                  .location;
              } catch (v) {
                c = document.location;
              }
              try {
                h = parent.location.href !== "" ? encodeURIComponent(parent.location.href
                  .toString().substring(0, 256)) : "";
              } catch (m) {
                try {
                  h = c !== null ? encodeURIComponent(c.toString().substring(0, 256)) : "";
                } catch (g) {
                  h = "";
                }
              }
              e = {
                add: function(e, t, n, r) {
                  r = r || false;
                  if (e.addEventListener) {
                    e.addEventListener(t, n, r);
                  } else if (e.attachEvent) {
                    e.attachEvent("on" + t, n);
                  }
                },
                load: function() {
                  var e, c = document.createElement("script"),
                    d = null,
                    v = document.getElementsByTagName("script"),
                    m = Number(v.length) - 1,
                    g = document.getElementsByTagName("script")[m];
                  if (typeof e === "undefined") {
                    e = Math.floor(Math.random() * 1e17);
                  }
                  d = "px.steelhousemedia.com/st?" + "conv=1" + "&shver=" + t + "&shaid=" +
                    n + "&shoid=" + r + "&shoamt=" + i + "&shocur=" + s + "&shopid=" + o +
                    "&shoq=" + u + "&shoup=" + a + "&shpil=" + f + "&tdr=" + l + "&plh=" +
                    h + "&cb=" + e + shadditional;
                  c.type = "text/javascript";
                  c.src = ("https:" === document.location.protocol ? "https://" :
                    "http://") + d;
                  g.parentNode.insertBefore(c, g);
                }
              };
              e.load();
            })();
            (function() {
              "use strict";
              var e = null,
                t = "3.4.0",
                n = "" + SteelHouseAdvertiserID,
                r = shaddslashes(""),
                i = shaddslashes(""),
                s = shaddslashes(""),
                o = "",
                u = "",
                a = "",
                f = "",
                l = "",
                c = "",
                h = "" + OrderTotal,
                p = getCount(),
                d = getSKUs(),
                v = getQtys(),
                shadditional = "" + AdditionalInformation,
                m, g, y;
              try {
                m = top.document.referer !== "" ? encodeURIComponent(top.document.referrer
                  .substring(0, 256)) : ""
              } catch (w) {
                m = document.referrer !== null ? encodeURIComponent(document.referrer.toString()
                  .substring(0, 256)) : ""
              }
              try {
                g = window && window.top && document.location && window.top.location ===
                  document.location ? document.location : window && window.top && window.top
                  .location && "" !== window.top.location ? window.top.location : document
                  .location
              } catch (E) {
                g = document.location
              }
              try {
                y = parent.location.href !== "" ? encodeURIComponent(parent.location.href
                  .toString().substring(0, 256)) : ""
              } catch (S) {
                try {
                  y = g !== null ? encodeURIComponent(g.toString().substring(0, 256)) : ""
                } catch (x) {
                  y = ""
                }
              }
              a = encodeURIComponent(a);
              e = {
                add: function(e, t, n, r) {
                  r = r || false;
                  if (e.addEventListener) {
                    e.addEventListener(t, n, r)
                  } else if (e.attachEvent) {
                    e.attachEvent("on" + t, n)
                  }
                },
                load: function() {
                  var e, g = document.createElement("script"),
                    w = null,
                    E = document.getElementsByTagName("script"),
                    S = Number(E.length) - 1,
                    x = document.getElementsByTagName("script")[S];
                  if (typeof e === "undefined") {
                    e = Math.floor(Math.random() * 1e17)
                  }
                  w = "px.steelhousemedia.com/st?" + "shver=" + t + "&shaid=" + n +
                    "&shpn=" + r + "&shpc=" + i + "&shpb=" + s + "&shpp=" + o + "&shpcur=" +
                    u + "&shpi=" + a + "&shps=" + f + "&shpic=" + l + "&shpau=" + c +
                    "&shcv=" + h + "&shcq=" + p + "&shcp=" + d + "&shcpq=" + v + "&tdr=" +
                    m + "&plh=" + y + "&cb=" + e + shadditional;
                  g.type = "text/javascript";
                  g.src = ("https:" === document.location.protocol ? "https://" :
                    "http://") + w;
                  x.parentNode.insertBefore(g, x)
                }
              };
              e.load()
            })();
        </script>

    </body>
</html>